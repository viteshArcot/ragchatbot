{"ast":null,"code":"var _jsxFileName = \"/workspaces/ragchatbot/rag-chatbot-frontend/src/components/ChatBox.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { chatAPI } from '../api';\n\n/**\n * ChatBox Component - Main chat interface\n * Handles user input, sends queries, and displays responses\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatBox = ({\n  onNewMessage\n}) => {\n  _s();\n  const [question, setQuestion] = useState('');\n  const [response, setResponse] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Handle form submission\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!question.trim()) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const result = await chatAPI.sendQuery(question);\n      setResponse(result);\n\n      // Notify parent component of new message for history update\n      if (onNewMessage) {\n        onNewMessage();\n      }\n      setQuestion(''); // Clear input\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'Failed to get response');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-box\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"RAG Chatbot\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"query-form\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: question,\n          onChange: e => setQuestion(e.target.value),\n          placeholder: \"Ask me anything...\",\n          disabled: loading,\n          className: \"question-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading || !question.trim(),\n          className: \"send-button\",\n          children: loading ? 'Sending...' : 'Send'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Error:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), \" \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this), response && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"response-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"response-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Response:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: response.answer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), response.similarity_score && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"similarity-score\",\n          children: /*#__PURE__*/_jsxDEV(\"small\", {\n            children: [\"Similarity Score: \", response.similarity_score.toFixed(3)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), response.sources && response.sources.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sources-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Sources:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"sources-list\",\n          children: response.sources.map((source, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"source-item\",\n            children: source\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatBox, \"FXiKcqB9alXmpfVYcCvsKjYgugo=\");\n_c = ChatBox;\nexport default ChatBox;\nvar _c;\n$RefreshReg$(_c, \"ChatBox\");","map":{"version":3,"names":["React","useState","chatAPI","jsxDEV","_jsxDEV","ChatBox","onNewMessage","_s","question","setQuestion","response","setResponse","loading","setLoading","error","setError","handleSubmit","e","preventDefault","trim","result","sendQuery","err","_err$response","_err$response$data","data","detail","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","disabled","answer","similarity_score","toFixed","sources","length","map","source","index","_c","$RefreshReg$"],"sources":["/workspaces/ragchatbot/rag-chatbot-frontend/src/components/ChatBox.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { chatAPI } from '../api';\n\n/**\n * ChatBox Component - Main chat interface\n * Handles user input, sends queries, and displays responses\n */\nconst ChatBox = ({ onNewMessage }) => {\n  const [question, setQuestion] = useState('');\n  const [response, setResponse] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!question.trim()) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await chatAPI.sendQuery(question);\n      setResponse(result);\n      \n      // Notify parent component of new message for history update\n      if (onNewMessage) {\n        onNewMessage();\n      }\n      \n      setQuestion(''); // Clear input\n    } catch (err) {\n      setError(err.response?.data?.detail || 'Failed to get response');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"chat-box\">\n      <h2>RAG Chatbot</h2>\n      \n      {/* Query Form */}\n      <form onSubmit={handleSubmit} className=\"query-form\">\n        <div className=\"input-group\">\n          <input\n            type=\"text\"\n            value={question}\n            onChange={(e) => setQuestion(e.target.value)}\n            placeholder=\"Ask me anything...\"\n            disabled={loading}\n            className=\"question-input\"\n          />\n          <button \n            type=\"submit\" \n            disabled={loading || !question.trim()}\n            className=\"send-button\"\n          >\n            {loading ? 'Sending...' : 'Send'}\n          </button>\n        </div>\n      </form>\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"error-message\">\n          <strong>Error:</strong> {error}\n        </div>\n      )}\n\n      {/* Response Display */}\n      {response && (\n        <div className=\"response-container\">\n          <div className=\"response-message\">\n            <h3>Response:</h3>\n            <p>{response.answer}</p>\n            \n            {/* Similarity Score */}\n            {response.similarity_score && (\n              <div className=\"similarity-score\">\n                <small>Similarity Score: {response.similarity_score.toFixed(3)}</small>\n              </div>\n            )}\n          </div>\n\n          {/* Sources */}\n          {response.sources && response.sources.length > 0 && (\n            <div className=\"sources-container\">\n              <h4>Sources:</h4>\n              <ul className=\"sources-list\">\n                {response.sources.map((source, index) => (\n                  <li key={index} className=\"source-item\">\n                    {source}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatBox;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}